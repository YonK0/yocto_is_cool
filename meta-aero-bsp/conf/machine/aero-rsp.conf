require conf/machine/raspberrypi0-2w.conf

MACHINEOVERRIDES .= ":aero-rsp"

# Emergency mode
#CMDLINE:append = " init=/bin/sh"

#Kernel optimization
MACHINE_FEATURES:remove = 'apm usbhost keyboard screen touchscreen alsa bluetooth sdio vc4graphics qemu-usermode'

#Adding enable_uart in config.txt
ENABLE_UART = "1"

IMAGE_INSTALL:remove = "kernel-image kernel-devicetree kernel-base kernel-modules"
IMAGE_BOOT_FILES:remove = "zImage;kernel7.img"
RPI_EXTRA_IMAGE_BOOT_FILES = ""

########## custom dts overlay ###################
#Enable the overlay in config.txt
IMAGE_BOOT_FILES:append = "myled.dtbo"
KERNEL_DEVICETREE:append = " overlays/myled.dtbo"
#Useless : to be removed
RPI_EXTRA_CONFIG = "dtoverlay=myled"
#################################################

########## Custom kernel module #################
IMAGE_INSTALL:append = " my-module"
#################################################


########## Enable build information output ######
INHERIT += "buildhistory"
BUILDHISTORY_COMMIT = "1"
